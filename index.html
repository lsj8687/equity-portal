<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="UTF-8">
<title>Transit Equity Portal</title>

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script src="js/d3.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src = 'https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js'></script>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Hepta+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Theme CSS - Includes Bootstrap -->
<link href="css/creative.css" rel="stylesheet">
<link href="css/equity.css" rel="stylesheet">
<link href="css/accessibility.css" rel="stylesheet">

</head>

<link href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css" type="text/css">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://d3js.org/d3-hsv.v0.1.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<body id="page-top">

    <div class="logo-wrapper">
      <a href="https://cspav.gatech.edu/"><img src="img/CSPAV_TechGold.jpg" alt="" width="200" height="35"></a>
    </div>
  
    <!-- Masthead -->
    <div class="masthead">
      <div class="container h-100">
        <div class="row h-100 align-items-center justify-content-center text-center">
          <div class="col-lg-10 align-self-end">
            <h1 class="text-uppercase text-white font-weight-bold">Atlanta Transit</h1>
            <div class="focus"> 
                <div class="focus--mask">
                  <div class="focus--mask-inner">Equity</div>
                </div>
              </div> 
          </div>
          <div class="col-lg-8 align-self-baseline">
            <p class="text-white-75 font-weight-light mb-5">An interactive tool that compares 
              the transit accessibility and equity of the conventional transit system and on-demand multimodal transit services
            </p>
          </div>
        </div>
      </div>
    </div>

    <div id="graphic">

      <div id="sections">
        <section class="step">
          <section class="page-section"> 
          </section>
        </section>
        <section class="step">
              <!-- odmts Section -->
          <section class="page-section bg-primary" id="odmts">
            <div class="container">
              <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                  <h2 class="text-white mt-0">On-Demand Multimodal Transit Services</h2>
                  <p class="text-white-50 mb-4">Being multimodal, ODMTS combine on-demand mobility services to serve low-density regions with high-occupany vehicles travling along high-density corridors</p>
                  <a class="btn btn-light btn-xl js-scroll-trigger" href="https://sam.isye.gatech.edu/projects/demand-multimodal-transit-systems/atlanta-pilot">
                    Learn More</a>
                </div>
              </div>
            </div>
          </section>
        </section>

        <section class="step">
              <!-- transit accessibility Section -->
          <section class="page-section bg-primary" id="accessibility">
            <div class="container">
              <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                  <h2 class="text-white mt-0">Transit accessibility</h2>
                  <p class="text-white-50 mb-4">ODMTS, a novel transit service, contributes to improving transit accessibility across the Atlanta region. Transit accessbility ~ <br>
                    <br>
                  To understand its impact on transit accessibility and equity, we use two different approaches. Travel time by public transit system based approach ~
                  </p>
                </div>
              </div>
            </div>
          </section>
        </section>

        <section class="step">
        <!-- transit accessibility map Section -->
          <section class="page-section bg-primary" id="accessibilityMap">
            <div class="container">
              <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                  <h2 class="text-white mt-0">Exploring transit accessibility</h2>
                </div>
              </div>
            </div>
          </section>
        </section>

        <section class="step">
          <!-- transit equity Section -->
          <section class="page-section bg-primary" id="equity">
            <div class="container">
              <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                  <h2 class="text-white mt-0">Transit equity</h2>
                  <p class="text-white-50 mb-4">ODMTS, a novel transit service, contributes to improving transit accessibility across the Atlanta region. Transit accessbility ~ <br>
                    <br>
                  To understand its impact on transit accessibility and equity, we use two different approaches. Travel time by public transit system based approach ~
                  </p>
                </div>
              </div>
            </div>
          </section>
        </section>

        <section class="step">
        <!-- transit equity map Section -->
          <section class="page-section bg-primary" id="equityMap">
            <div class="container">
              <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                  <h2 class="text-white mt-0">Exploring transit equity</h2>
                </div>
              </div>
            </div>
          </section>
        </section>

      </div>
    <div id="vis">
    </div>
  </div>
  
    <!-- Description -->
    <section id="description">
      <div class="container mb-3 mt-5">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">Description</h2>
            <h4 class="section-subheading text-muted">How we deal with data and do analysis</h4>
          </div>
        </div>
      </div>
    </section>
  
    <!-- Footer -->
    <!-- <footer class="bg-dark py-5">
      <div class="container">
        <div class="row">
          <div class="small text-left text-muted col-md-4">&copy; 2022 Georgia Institute of Technology</div>
          <div class="col-md-4"></div>
          <div class="col-md-4">
            <a href="http://cspav.gatech.edu" target="_blank" rel="noopener noreferrer">
            </a>
          </div>
        </div>
      </div>
    </footer> -->
  
    <div class="mapWrapperAcc">
      <div class="mapTitleLeft"> <p>Conventional Public Transit System </p> </div>
      <div class="mapTitleRight"> <p style="color: #dcfcb8;">On-demand Multimodal Transit System</p> </div>
      <div id="mapBefAcc"></div>
      <div id="mapAftAcc"></div>
      <div class="legend-box">
        <div class="legend-wrapperAcc">
          <div class="legendTitle" id="legendTitle">
            <p>Accessibility Index</p>
          </div>
          <div class="legendBoxes">
            <div class="legendBox", style="background-color:#213E9A"></div>
            <div class="legendBox", style="background-color:#3C1FA7"></div>
            <div class="legendBox", style="background-color:#3C1FA7"></div>
            <div class="legendBox", style="background-color:#C318B0"></div>
            <div class="legendBox", style="background-color:#D01367"></div>
            <div class="legendBox", style="background-color:#DE0F0E"></div>
            <div class="legendBox", style="background-color:#EC7007"></div>
            <div class="legendBox", style="background-color:#F9E200"></div>
          </div>
          <div class="legendText">
            <p>less then 5%</p>
            <p>5 - 10%</p>
            <p>10 - 20%</p>
            <p>20 - 30%</p>
            <p>30 - 40%</p>
            <p>40 - 60%</p>
            <p>60 - 80%</p>
            <p>more than 80%</p>
          </div>
        </div>
      </div>
      <div id="filter-wrapper">
        <div class="sessionAcc_trip">
          <div class="session_title">
            <p>Trip type</p>
          </div>
          <div class='rowMap' id='filtersAcc_trip'>
            <input id='comAcc' type='radio' name='toggleAcc_trip' value='com' checked='checked'>
            <label for='comAcc'>Commuting</label>
            <input id='nonAcc' type='radio' name='toggleAcc_trip' value='non'>
            <label for='nonAcc'>Non-commuting</label>
          </div>
        </div>
        <div class="sessionAcc_meas">
          <div class="session_title">
            <p>Accessibility type</p>
          </div>
          <div class='rowMap' id='filtersAcc_meas'>
            <input id='absAcc' type='radio' name='toggleAcc_meas' onclick="getSliderAcc_abs()" value='abs' checked='checked'>
            <label for='abs'>Travel Time by Public Transit</label>
            <input id='relAcc' type='radio' name='toggleAcc_meas' onclick="getSliderAcc_rel()" value='rel'>
            <label id= 'filter_rel' for='rel'>
              <div class="fraction">
                <p class="num">Travel Time by Public Transit</p>
                <p class="dem">Travel Time by Driving</p>
              </div>
            </label>
          </div>
        </div>
        <div class="sliderContainer">
          <div class='sliderAccContentAbsolute'>
            <p style="margin-bottom:7px;"> Accessible within <span style="font-weight:600" id="sliderValueAcc_abs"></span> minutes</p>
            <input id='myRangeAcc_abs' class="slider" type="range" min="30" max="75" value="45" step="3">
            <p style="text-align:left; margin-bottom: 0em; font-size: 13px; font-weight: 100;"> 30 minutes <span style="float:right"> 75 minutes </span> </p>
          </div>
          <div class='sliderAccContentRelative'>
            <p style="margin-bottom:7px;"> Accessible within <span style="font-weight:600" id="sliderValueAcc_rel"> </span> X driving time </p>
            <input id='myRangeAcc_rel' class="slider" type="range" min="1" max="3" value="2" step="0.2">
            <p style="text-align:left; margin-bottom: 0em; font-size: 13px; font-weight: 100;"> Equal <span style="float:right"> 3 times </span> </p>
          </div>
        </div>
      </div>
    </div>

    <div id="mapWrapperEqu">
      <div class="mapTitleLeft"> <p>Conventional Public Transit System </p> </div>
      <div class="mapTitleRight"> <p style="color: #dcfcb8;">On-demand Multimodal Transit System</p> </div>
      <div id='plot-wrapper'>
        <div id='gapSummary'>
          <div id='gapTitle'>
            <p> Transit Inequity: demand-supply gap <a class="button" href="#popup1"><span class="material-symbols-outlined">Help</span></a></p>
          </div>
          <div id='gapSmallText'>
            <p> Current </p>
            <p style="color: #dcfcb8; font-weight: 300;"> ODMTS </p>
          </div>
          <div id='gapValue'>
            <p> <span id="gapValueBefore"></b> </span> </p>
            <p> <span id="gapValueAfter"></b> </span> </p>
          </div>
        </div>
        <div id='scatterPlot'></div>
        <div id='giniSummary'>
          <div id="giniTitle">
            <p>Transit Inequality by Level of Demand <a class="button" href="#popup2"><span class="material-symbols-outlined">Help</span></a></p>
          </div>
          <div id="giniSmallText">
            <p> Current </p>
            <p style="color: #dcfcb8; font-weight: 300;"> ODMTS </p>
          </div>
          <div id="giniValue-wrapper">
            <div id="giniValue">
              <p style="color: #fffde6;"> <span id="giniBeforeLow"></b> </span> </p>
              <p style="color: #f7adad;"> <span id="giniBeforeMid"></b> </span> </p>
              <p style="color: #e34b4b;"> <span id="giniBeforeHigh"></b> </span> </p>
            </div>
            <div id="giniValue">
              <p style="font-size: 12px; font-weight: 300; text-align: center;"> Low-demand neighborhoods </p>
              <p style="font-size: 12px; font-weight: 300; text-align: center;"> Mid-demand neighborhoods </p>
              <p style="font-size: 12px; font-weight: 300; text-align: center;"> High-demand neighborhoods </p>
            </div>
            <div id="giniValue">
              <p style="color: #fffde6;"> <span id="giniAfterLow"></b> </span> </p>
              <p style="color: #f7adad;"> <span id="giniAfterMid"></b> </span> </p>
              <p style="color: #e34b4b;"> <span id="giniAfterHigh"></b> </span> </p>
            </div>
          </div>
        </div>
        <div id='lorenzCurve'></div>
      </div>
      <div id="mapBefEqu"></div>
      <div id="mapAftEqu"></div>
      <div id="filter-wrapper">
        <div class='sessionEqu_demand'>
          <div class="session_title">
            <p>Transit demand type</p>
          </div>
          <div class='rowMap' id='demandEqu'>
            <input id='dep' type='radio' name='toggle_dem' onclick="legend_dep()" value='dep' checked='checked'>
            <label for='dep'>Population without vehicles</label>
            <input id='min' type='radio' name='toggle_dem' onclick="legend_min()" value='min'>
            <label for='min'>Minority population</label>
            <input id='pov' type='radio' name='toggle_dem' onclick="legend_pov()" value='pov'>
            <label for='pov'>Low-income population</label>
            <input id='emp' type='radio' name='toggle_dem' onclick="legend_emp()" value='emp'>
            <label for='emp'>Unemployed population</label>
            <input id='dis' type='radio' name='toggle_dem' onclick="legend_dis()" value='dis'>
            <label for='dis'>Disabled population</label>
            <input id='eld' type='radio' name='toggle_dem' onclick="legend_eld()" value='eld'>
            <label for='eld'>Elderly population</label>
            <input id='chi' type='radio' name='toggle_dem' onclick="legend_chi()" value='chi'>
            <label for='chi'>Children below 14</label>
          </div>
        </div>
        <div class="sessionEqu_unit">
          <div class="session_title">
            <p>Transit demand unit</p>
          </div>
          <div class='rowMap' id='unitEqu'>
            <input id='act' type='radio' name='toggle_unit' onclick="unit_num()" value='act' checked='checked'>
            <label for='act'>Number of people</label>
            <input id='pct' type='radio' name='toggle_unit' onclick="unit_pct()" value='pct'>
            <label for='pct'>Percentage (%)</label>
          </div>
        </div>
        <div class="sessionEqu_trip">
          <div class="session_title">
            <p>Trip type</p>
          </div>
          <div class='rowMap' id='tripEqu'>
            <input id='com' type='radio' name='toggle_trip' value='com' checked='checked'>
            <label for='com'>Commuting trip</label>
            <input id='non' type='radio' name='toggle_trip' value='non'>
            <label for='non'>Non-commuting trip</label>
          </div>
        </div>
        <div class='sessionEqu_meas'>
          <div class="session_title">
            <p>Accesibility Type</p>
          </div>
          <div class='rowMap' id='filtersEqu_meas'>
            <input id='abs' type='radio' name='toggle_meas' onclick="getSliderEqu_abs()" value='abs' checked='checked'>
            <label for='abs'>Travel Time by Public Transit</label>
            <input id='rel' type='radio' name='toggle_meas' onclick="getSliderEqu_rel()" value='rel'>
            <label id= 'filter_rel' for='rel'>
              <div class="fraction">
                <p class="num">Travel Time by Public Transit</p>
                <p class="dem">Travel Time by Driving</p>
              </div>
            </label>
          </div>
        </div>
        <div class="sliderContainer">
          <div class='sliderEquContentAbsolute'>
            <p style="margin-bottom:7px;"> Accessible within <span style="font-weight:600" id="sliderValueEqu_abs"> </span> minutes</p>
            <input id='myRangeEqu_abs' class="slider" type="range" min="30" max="75" value="45" step="3">
            <p style="text-align:left; margin-bottom: 0em; font-size: 13px; font-weight: 100;"> 30 minutes <span style="float:right"> 75 minutes </span> </p>
          </div>
          <div class='sliderEquContentRelative'>
            <p style="margin-bottom:7px;"> Accessible within <span style="font-weight:600" id="sliderValueEqu_rel"> </span> X driving time</p>
            <input id='myRangeEqu_rel' class="slider" type="range" min="1" max="3" value="2" step="0.2">
            <p style="text-align:left; margin-bottom: 0em; font-size: 13px; font-weight: 100;"> Equal <span style="float:right"> 3 times </span> </p>
          </div>
        </div>
      </div>
      <div id="legend-wrapper">
        <div class="legendInfo">
          <a class="button" href="#popup3"><span class="material-symbols-outlined">Help</span></a>
        </div>
      </div>
      <div id="popup1" class="overlay">
        <div class="popup">
          <h2>How is the 'Transit Inequality' measured?</h2>
            <a class="close" href="#mapWrapperEqu">&times;</a>
            <div class="content">
              <ul>
                <li>The numeric values are Gap indices that summarize the overall gap between transit supply (i.e., accessibility) and demand, which is measured by:
                  <p class="cmath"> $$ \sum_{i=1}^n(\mid ServiceSupply_{i}^{percentile}\mid - \mid ServiceDemand_{i}^{percentile}\mid) \over n $$</p></li>
                <li>The Gap index ranges from 0 to 1, where a value of 1 represents total inequity.</li>
                <li>The scatterplot shows how the transit service supply is distributed with respect to the transit demand variable.</li>
              </ul>
            </div>
        </div>
        <div id='plot-wrapper'>
          <div id='gapSummary'>
            <div id='gapTitle'>
              <p> Transit Inequity: demand-supply gap <a class="button" href="#popup1"><span class="material-symbols-outlined">Help</span></a></p>
            </div>
            <div id='gapSmallText'>
              <p> Current </p>
              <p style="color: #dcfcb8; font-weight: 300;"> ODMTS </p>
            </div>
            <div id='gapValue'>
              <p> <span id="gapValueBefore2"></b> </span> </p>
              <p> <span id="gapValueAfter2"></b> </span> </p>
            </div>
          </div>
          <div id='scatterPlot'></div>
          <div id='giniSummary'></div>
          <div id="lorenzCurve" style="visibility:hidden"></div>
        </div>
      </div>
      <div id="popup2" class="overlay">
        <div class="popup" style="top: 50%;">
            <h2>How is the 'Transit Inequality' measured?</h2>
            <a class="close" href="#mapWrapperEqu">&times;</a>
            <div class="content">
              <ul>
                <li>The numeric values are Gini indices which represent the degree of inequality among neighborhoods with low/mid/high transit demand, respectively. </li>
                <li>A high value of Gini index means the distribution is far from equal. </li>
                <li>The plot is showing Lorenz curves which also indicate the degree of inequality based on how far it is from the line of equality.</li>
              </ul>
            </div>
        </div>
        <div id='plot-wrapper'>
          <div id='gapSummary'></div>
          <div id='scatterPlot' style="visibility:hidden"></div>
          <div id='giniSummary'>
            <div id="giniTitle">
              <p>Transit Inequality by Level of Demand <a class="button" href="#popup2"><span class="material-symbols-outlined">Help</span></a></p>
            </div>
            <div id="giniSmallText">
              <p> Current </p>
              <p style="color: #dcfcb8; font-weight: 300;"> ODMTS </p>
            </div>
            <div id="giniValue-wrapper">
              <div id="giniValue">
                <p style="color: #fffde6;"> <span id="giniBeforeLow2"></b> </span> </p>
                <p style="color: #f7adad;"> <span id="giniBeforeMid2"></b> </span> </p>
                <p style="color: #e34b4b;"> <span id="giniBeforeHigh2"></b> </span> </p>
              </div>
              <div id="giniValue">
                <p style="font-size: 12px; font-weight: 300; text-align: center;"> Low-demand neighborhoods </p>
                <p style="font-size: 12px; font-weight: 300; text-align: center;"> Mid-demand neighborhoods </p>
                <p style="font-size: 12px; font-weight: 300; text-align: center;"> High-demand neighborhoods </p>
              </div>
              <div id="giniValue">
                <p style="color: #fffde6;"> <span id="giniAfterLow2"></b> </span> </p>
                <p style="color: #f7adad;"> <span id="giniAfterMid2"></b> </span> </p>
                <p style="color: #e34b4b;"> <span id="giniAfterHigh2"></b> </span> </p>
              </div>
            </div>
          </div>
          <div id="lorenzCurve"></div>
        </div>
      </div>
      <div id="popup3" class="overlay">
        <div class="popup" style="top: 65%; left: 13%;">
          <h2>How does the legend work?</h2>
          <a class="close" href="#mapWrapperEqu">&times;</a>
          <div class="content">
            <ul>
              <li>The legend shows the level of transit accessibility and transit demand that each Block Group falls under</li>
              <li><span style="background: #663d9c;">Purple</span> means transit is over-supplied compared to the low transit demand </li>
              <li><span style="background: #b55353;">Red</span> means transit is under-spplied compared to the high transit demand </li>
              <li><span style="background: #fffacf; color: black;">Ivory</span> means transit supply corresponds to the transit demand </li>
              <li>Click each of the nine boxes to highlight neighborhoods in each category; or click each circle on the axes to highlight by row/column </li>
            </ul>
          </div>
        </div>
        <div id="filter-wrapper">
          <div></div>
          <div id="legend-wrapper"></div>
        </div>
      </div>
    </div>  
    <!-- Custom scripts for this template -->
    <script src="js/creative.js"></script>
    <script src="js/accessibility.js"></script>
    <script src="js/equity.js"></script>

    <script src="js/scroller.js"></script>
    <script src="js/sections_sample.js"></script>

  
  </body>
  
  </html>